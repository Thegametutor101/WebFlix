
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Formulaire nouveau contenu</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
          crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="../../../ressources/css/cssProjetSGBD.css">
  <link rel="stylesheet" type="text/css" href="../../../ressources/css/main.css">
  <link rel="stylesheet" type="text/css" href="../../../ressources/css/cssProjetSGBD.css">
  <link rel="stylesheet" type="text/css" href="../../../ressources/css/index.css">


  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <!--    Custom style sheets  -->
</head>

<body>
<header>
  <div class="logo">
    <img src="../../../ressources/assets/images/webflix_orig.png">
  </div>
  <button class="adminSection" style="visibility: hidden">admin</button>
  <button class="profileBubble" onclick="window.open('http://localhost/Webflix/AppBundle/pages/account/myAccount.html')">
    <img id="profilePicture" src="../../../ressources/assets/images/defaultUserProfile.png"
         alt="../../../ressources/assets/images/defaultUserProfile.png">
  </button>
  <button class="webflixhelp" onclick="window.open('http://localhost/Webflix/AppBundle/pages/aide/tutorialWebflix.html')">

    <img src="../../../ressources/assets/images/help.png"
         alt="../../../ressources/assets/images/help.png">
  </button>
</header>

<br>
<br>
<br>
<br>
<div style="width:80%; margin:0 auto;">
  <br>
  <h2>Demander un nouveau contenu</h2>
<form>
    <div class="form-group" style="">
<br>
    <label >Titre du contenu*</label>
    <input style="width:60%;" type="text" class="form-control" id="idTitre"  placeholder="Titre" >
    <small id="emailHelp" class="form-text text-muted"></small>
  </div>
  <br>
  <div class="form-group">
    <label>Platform trouvé*</label>
    <input  style="width:60%;" type="text" class="form-control" id="idPlatform" placeholder="Ex:Youtube,AmazonVideo,DailyMotion etc"  >
  </div>
<br>
  <div class="form-group">
    <label class="titre" >Type de contenue*</label>
    <select name="typeVideo" id="typeVideo" style="color: #111111">
      <option style="color: #111111" value="video">Video</option>
      <option style="color: #111111" value="film">Film</option>
      <option style="color: #111111" value="Serie">Serie-télévisé</option>r
    </select>
  </div>
  <br>
  <div class="form-group">
    <label class="titre">Lien direct*</label>
    <input  style="width:60%;" type="text" class="form-control" id="idLien" placeholder="https://www.youtube.com/watch?v=dQw4w9WgXcQ" >
  </div>
<br>
  <div class="form-check">
    <input type="checkbox"  class="form-check-input" id="exampleCheck1" name="checkboxReq">
    <label class="form-check-label" for="exampleCheck1" style="color:white">J'ai lu et accepte que Webflix n'a aucune obligation d'ajouter le contenue. Ceci n'est qu'une suggestion.Chaque publication sera révisé par l'équipe et ajouter si tous nos critères sont respectés </label>
  </div>
<h2>

</h2>
  <br>
  <button type="button" id ="IdButtonSoumettre">Soumettre</button>
</form>
</div>
<!--basdepageaveclien-->

<script src="../../../ressources/javascript/mainJavaScript.js"></script>
<div w3-include-html="../basDePage.html"></div>
<script>

checkConnection();
    if (sessionStorage.getItem("adminAccount") === "1") {
        $(".adminSection").css("visibility", "visible");
    }

  includeHTML();
</script>
</body>

<script>
  function checkBox()
  {
    return document.getElementById("exampleCheck1").checked;
  }


  $(document).ready(function (e) {
    if (sessionStorage.getItem("profile") !== null && sessionStorage.getItem("profile") !== "") {
        let profilepic = sessionStorage.getItem("profile");
        result = profilepic.split("/../");
        if (result.length > 1){
            sessionStorage.setItem("profile", result[1]);
        }
        $("#profilePicture").attr("src", "../../../" + sessionStorage.getItem("profile"));
    }


    $("#IdButtonSoumettre").click(function (e) {
      e.preventDefault();
      if (checkBox()) {
        $.ajax({
          url: "http://localhost/Webflix/AppBundle/management/formNouveauContenuAdd.php",
          type: "POST",
          data: {
            'titre': $("#idTitre").val(),
            'platform': $("#idPlatform").val(),
            'typeVideo': $("#typeVideo").val(),
            'lien': $("#idLien").val()
          },
          dataType: "JSON",
          success: function (result) {
            alert("La demande a été acheminer")
            location.reload();
            // console.log(result["item"]);
            console.log(result);
          },
          error: function (message, error) {
            ///TODO add message during error or non valid connection
            console.log(message, error);
            alert("Une erreur est survenu veuillez réessayer")
          }
        });
      } else {
        alert("Veuillez cocher la case et réessayer");
      }
    });
  });
</script>



</html>
